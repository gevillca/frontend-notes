@if (note()) {
  <div class="h-full flex flex-col bg-surface-card">
    <!-- Actions Bar -->
    <div
      class="border-b border-surface p-4 flex items-center gap-2 bg-surface-50 dark:bg-surface-900">
      @if (!note()!.archived) {
        <p-button
          label="Edit"
          icon="pi pi-pencil"
          size="small"
          [outlined]="true"
          (onClick)="onEdit()" />
      } @else {
        <p-button
          label="Edit"
          icon="pi pi-pencil"
          size="small"
          [outlined]="true"
          [disabled]="true"
          pTooltip="Unarchive this note to edit it"
          tooltipPosition="bottom" />
      }

      @if (!note()!.archived) {
        <p-button
          label="Archive"
          icon="pi pi-inbox"
          size="small"
          [outlined]="true"
          (onClick)="onArchive()" />
      } @else {
        <p-button
          label="Unarchive"
          icon="pi pi-inbox"
          size="small"
          [outlined]="true"
          (onClick)="onArchive()" />
      }

      <p-button
        label="Delete"
        icon="pi pi-trash"
        size="small"
        severity="danger"
        [outlined]="true"
        (onClick)="onDelete()" />
    </div>

    <!-- Detail Header -->
    <div class="border-b border-surface p-6">
      <div class="flex items-start justify-between mb-4">
        <h1 class="text-2xl font-bold text-surface-900 dark:text-surface-0 flex-1 pr-4">
          {{ note()!.title }}
        </h1>

        @if (note()!.archived) {
          <p-tag value="Archived" severity="secondary" icon="pi pi-inbox" />
        }
      </div>

      <!-- Tags -->
      @if (tagNames().length > 0) {
        <div class="flex items-center gap-2 mb-4">
          <i class="pi pi-tag text-surface-500"></i>
          <span class="text-sm font-medium text-surface-600 dark:text-surface-400">Tags:</span>
          <div class="flex flex-wrap gap-1">
            @for (tagName of tagNames(); track $index) {
              <p-tag [value]="tagName" severity="secondary" />
            }
          </div>
        </div>
      }

      <div class="flex flex-col gap-2 text-sm">
        <!-- Status -->
        <div class="flex items-center gap-2 text-surface-500 dark:text-surface-400">
          <i class="pi pi-info-circle text-xs"></i>
          <span class="font-medium">Status</span>
          <span class="text-surface-900 dark:text-surface-0 font-medium">
            {{ note()!.archived ? 'Archived' : 'Active' }}
          </span>
        </div>

        <!-- Last Edited -->
        <div class="flex items-center gap-2 text-surface-500 dark:text-surface-400">
          <i class="pi pi-clock text-xs"></i>
          <span class="font-medium">Last edited</span>
          <span class="text-surface-900 dark:text-surface-0 font-medium">
            {{ note()!.lastEdited | dateFormat }}
          </span>
        </div>
      </div>
    </div>

    <!-- Content -->
    <div class="flex-1 overflow-auto p-6">
      <div class="prose prose-sm dark:prose-invert max-w-none">
        <p class="text-surface-900 dark:text-surface-0 whitespace-pre-wrap leading-relaxed">
          {{ note()!.content }}
        </p>
      </div>
    </div>
  </div>
} @else {
  <div class="h-full flex items-center justify-center bg-surface-ground">
    <div class="text-center">
      <i class="pi pi-file text-6xl text-surface-400 mb-4"></i>
      <h3 class="text-lg font-medium text-surface-900 dark:text-surface-0 mb-2">
        No note selected
      </h3>
      <p class="text-surface-500 dark:text-surface-400">
        Select a note from the list to view its details
      </p>
    </div>
  </div>
}
