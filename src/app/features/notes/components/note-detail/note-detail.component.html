@if (note()) {
  <div class="h-full flex flex-col bg-surface-card">
    <!-- Actions Bar -->
    <div
      class="border-b border-surface p-4 flex items-center gap-2 bg-surface-50 dark:bg-surface-900">
      <p-button
        label="Edit"
        icon="pi pi-pencil"
        size="small"
        [outlined]="true"
        (onClick)="onEdit()" />

      @if (!note()!.archived) {
        <p-button
          label="Archive"
          icon="pi pi-inbox"
          size="small"
          [outlined]="true"
          (onClick)="onArchive()" />
      } @else {
        <p-button
          label="Unarchive"
          icon="pi pi-inbox"
          size="small"
          [outlined]="true"
          (onClick)="onArchive()" />
      }

      <p-button
        label="Delete"
        icon="pi pi-trash"
        size="small"
        severity="danger"
        [outlined]="true"
        (onClick)="onDelete()" />
    </div>

    <!-- Detail Header -->
    <div class="border-b border-surface p-6">
      <div class="flex items-start justify-between mb-4">
        <h1 class="text-2xl font-bold text-surface-900 dark:text-surface-0 flex-1 pr-4">
          {{ note()!.title }}
        </h1>
      </div>

      <div class="flex flex-wrap gap-4 text-sm text-surface-600 dark:text-surface-400">
        @if (getTagNames().length > 0) {
          <div class="flex items-center gap-2">
            <i class="pi pi-tag"></i>
            <span class="font-medium">Tags</span>
            <div class="flex flex-wrap gap-1">
              @for (tagName of getTagNames(); track tagName) {
                <p-tag [value]="tagName" [rounded]="true"></p-tag>
              }
            </div>
          </div>
        }

        <div class="flex items-center gap-2">
          <i class="pi pi-clock"></i>
          <span class="font-medium">Last edited</span>
          <span class="text-surface-900 dark:text-surface-0">
            {{ note()!.lastEdited | date: 'medium' }}
          </span>
        </div>
      </div>
    </div>

    <div class="flex-1 overflow-auto p-6">
      <p class="text-surface-900 dark:text-surface-0 whitespace-pre-wrap leading-relaxed">
        {{ note()!.content }}
      </p>
    </div>
  </div>
} @else {
  <div class="h-full flex items-center justify-center bg-surface-ground">
    <div class="text-center">
      <i class="pi pi-file text-6xl text-surface-400 mb-4"></i>
      <h3 class="text-lg font-medium text-surface-900 dark:text-surface-0 mb-2">
        No note selected
      </h3>
      <p class="text-surface-500 dark:text-surface-400">
        Select a note from the list to view its details
      </p>
    </div>
  </div>
}
